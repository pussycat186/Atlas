# ATLAS GitHub Organization Secrets Guide

**Required for**: ATLAS_PERFECT_MODE_CLOSEOUT PERFECT_LIVE status  
**Last Updated**: 2025-10-16 23:50 UTC  
**Status**: MISSING_SECRETS (blocking PERFECT_LIVE deployment)

## ðŸŽ¯ Required Secrets

The following secrets must be configured in **GitHub Organization Settings**:

### Vercel Deployment Secrets
| Secret Name | Description | How to Obtain |
|-------------|-------------|---------------|
| `VERCEL_TOKEN` | Vercel API token with deployment permissions | [Vercel Dashboard](https://vercel.com/account/tokens) â†’ Create Token |
| `VERCEL_ORG_ID` | Vercel organization/team ID | `vercel teams ls` |
| `VERCEL_PROJECT_ID_ADMIN_INSIGHTS` | Project ID for admin-insights app | `vercel projects ls \| grep admin-insights` |
| `VERCEL_PROJECT_ID_DEV_PORTAL` | Project ID for dev-portal app | `vercel projects ls \| grep dev-portal` |
| `VERCEL_PROJECT_ID_PROOF_MESSENGER` | Project ID for proof-messenger app | `vercel projects ls \| grep proof-messenger` |

### Cloudflare CDN/DNS Secrets
| Secret Name | Description | How to Obtain |
|-------------|-------------|---------------|
| `CLOUDFLARE_ACCOUNT_ID` | Cloudflare account ID | Cloudflare Dashboard â†’ Account ID |
| `CLOUDFLARE_API_TOKEN` | API token with Zone:Edit permissions | Cloudflare â†’ My Profile â†’ API Tokens |

## ðŸ“‹ Setup Instructions

### 1. Configure GitHub Organization Secrets

1. Go to: **GitHub** â†’ **Settings** â†’ **Security** â†’ **Actions** â†’ **Secrets and variables** â†’ **Organization secrets**
2. Click **"New organization secret"**
3. Add each required secret with exact name and value
4. Set repository access to **"Selected repositories"** â†’ **pussycat186/Atlas**

### 2. Obtain Vercel Values

#### Install Vercel CLI
```bash
npm install -g vercel
vercel login
```

#### Get Organization ID
```bash
vercel teams ls
# Copy the ID for your organization
```

#### Get Project IDs
```bash
# List all projects
vercel projects ls

# Get specific project IDs
vercel projects ls --format json | jq '.[] | select(.name=="admin-insights") | .id'
vercel projects ls --format json | jq '.[] | select(.name=="dev-portal") | .id'  
vercel projects ls --format json | jq '.[] | select(.name=="proof-messenger") | .id'
```

#### Create API Token
1. Go to: https://vercel.com/account/tokens
2. Click **"Create Token"**
3. Name: "ATLAS GitHub Actions"
4. Scope: **Full Account** (for organization deployments)
5. Expiration: **No expiration** (for CI/CD)
6. Copy the generated token

### 3. Obtain Cloudflare Values

#### Account ID
1. Go to: https://dash.cloudflare.com/
2. Copy **Account ID** from right sidebar

#### API Token
1. Go to: https://dash.cloudflare.com/profile/api-tokens
2. Click **"Create Token"**
3. Use **"Custom token"** template
4. Permissions:
   - **Zone** : **Zone** : **Edit**
   - **Zone** : **DNS** : **Edit**
5. Zone Resources: **Include** : **All zones**
6. Copy the generated token

## âœ… Verification

After configuring all secrets, the `atlas-secrets-audit.yml` workflow will automatically verify them.

Expected output: **STATUS: ALL_SECRETS_PRESENT** âœ…

## ðŸš¨ Security Best Practices

- **Organization secrets** are shared across repositories
- Use **Selected repositories** access, not **All repositories**
- Rotate tokens every 90 days
- Monitor secret usage in Actions logs
- Never commit secrets to code

## ðŸ”„ Next Steps

Once all secrets are configured:
1. Run `atlas-secrets-audit.yml` â†’ **ALL_SECRETS_PRESENT**
2. Enable security flags in `security/flags.yaml`
3. Deploy with security headers
4. Execute `atlas-quality-gates.yml`
5. Achieve **PERFECT_LIVE** status ðŸŽ‰

## ðŸ“ž Support

If you need help configuring these secrets:
1. Check the auto-created GitHub issue labeled `secrets`, `atlas-perfect-mode`
2. Verify you have organization admin permissions
3. Ensure the Atlas repository has access to organization secrets

---

**Auto-generated by**: ATLAS_PERFECT_MODE_CLOSEOUT  
**Repository**: https://github.com/pussycat186/Atlas  
**Workflow**: atlas-secrets-audit.yml

1. **GitHub Actions**: Should deploy successfully without "VERCEL_TOKEN not configured" messages
2. **Vercel Dashboard**: Should show deployments triggered by GitHub
3. **URLs**: Should be accessible at `https://atlas-{app}.vercel.app`

## Security Notes

- Never commit secrets to the repository
- Use environment-specific secrets for staging vs production
- Rotate tokens every 90 days for security
- Monitor secret usage in Actions logs

## Troubleshooting

### "Invalid token" errors
- Verify token has correct permissions
- Check token hasn't expired
- Ensure team/org ID matches your Vercel account

### "Project not found" errors  
- Verify project ID is correct
- Ensure GitHub repository is connected to Vercel project
- Check project exists in the specified team/org

### "Permission denied" errors
- Token needs deployment permissions
- User must be owner/admin of Vercel team
- Project must allow GitHub deployments

## Without Secrets

If secrets are not configured:
- Local development still works in Codespaces
- Build and test phases run successfully  
- Only deployment phase will be skipped
- All other quality gates continue to function