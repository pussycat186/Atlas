<svg xmlns="http://www.w3.org/2000/svg" width="1000" height="700" viewBox="0 0 1000 700">
  <!-- Atlas Architecture Overview -->
  <defs>
    <style>
      .title { font-family: 'Roboto', sans-serif; font-size: 28px; font-weight: bold; fill: #0A2540; }
      .subtitle { font-family: 'Roboto', sans-serif; font-size: 14px; fill: #666; }
      .label { font-family: 'Roboto', sans-serif; font-size: 13px; fill: #0A2540; }
      .small-label { font-family: 'Roboto', sans-serif; font-size: 11px; fill: #333; }
      .client { fill: #00D4AA; stroke: #0A2540; stroke-width: 2; }
      .gateway { fill: #FFA500; stroke: #0A2540; stroke-width: 2; }
      .service { fill: #4A90E2; stroke: #0A2540; stroke-width: 2; }
      .storage { fill: #9B59B6; stroke: #0A2540; stroke-width: 2; }
      .security { fill: #E74C3C; stroke: #0A2540; stroke-width: 2; }
      .line { stroke: #0A2540; stroke-width: 2; fill: none; }
      .dashed { stroke-dasharray: 5,5; }
    </style>
  </defs>
  
  <!-- Title -->
  <text x="500" y="40" class="title" text-anchor="middle">Atlas Ecosystem Architecture</text>
  <text x="500" y="65" class="subtitle" text-anchor="middle">Agent-First, Security-Core, E2EE Messaging Platform</text>
  
  <!-- Client Layer -->
  <rect x="50" y="100" width="900" height="120" fill="#F9F9F9" stroke="#CCC" stroke-width="1" rx="5"/>
  <text x="70" y="125" class="label" font-weight="bold">CLIENT LAYER</text>
  
  <rect x="100" y="140" width="150" height="60" class="client" rx="5"/>
  <text x="175" y="165" class="label" text-anchor="middle" font-weight="bold">PWA Client</text>
  <text x="175" y="185" class="small-label" text-anchor="middle">Passkey/WebAuthn</text>
  <text x="175" y="200" class="small-label" text-anchor="middle">DPoP + Receipt Verify</text>
  
  <rect x="300" y="140" width="150" height="60" class="client" rx="5"/>
  <text x="375" y="165" class="label" text-anchor="middle" font-weight="bold">E2EE Engine</text>
  <text x="375" y="185" class="small-label" text-anchor="middle">Double Ratchet</text>
  <text x="375" y="200" class="small-label" text-anchor="middle">MLS (Group Chat)</text>
  
  <rect x="500" y="140" width="150" height="60" class="client" rx="5"/>
  <text x="575" y="165" class="label" text-anchor="middle" font-weight="bold">Trust Verifier</text>
  <text x="575" y="185" class="small-label" text-anchor="middle">Receipt Validation</text>
  <text x="575" y="200" class="small-label" text-anchor="middle">JWKS Lookup</text>
  
  <rect x="700" y="140" width="150" height="60" class="client" rx="5"/>
  <text x="775" y="165" class="label" text-anchor="middle" font-weight="bold">Offline Cache</text>
  <text x="775" y="185" class="small-label" text-anchor="middle">IndexedDB</text>
  <text x="775" y="200" class="small-label" text-anchor="middle">50 messages</text>
  
  <!-- Gateway Layer -->
  <rect x="50" y="250" width="900" height="100" fill="#FFF8E7" stroke="#CCC" stroke-width="1" rx="5"/>
  <text x="70" y="275" class="label" font-weight="bold">API GATEWAY</text>
  
  <rect x="150" y="290" width="200" height="45" class="gateway" rx="5"/>
  <text x="250" y="310" class="label" text-anchor="middle" font-weight="bold">HTTPS Gateway</text>
  <text x="250" y="327" class="small-label" text-anchor="middle">TLS 1.3 + DPoP + Rate Limit</text>
  
  <rect x="400" y="290" width="200" height="45" class="gateway" rx="5"/>
  <text x="500" y="310" class="label" text-anchor="middle" font-weight="bold">Load Balancer</text>
  <text x="500" y="327" class="small-label" text-anchor="middle">CDN + Canary Routing</text>
  
  <rect x="650" y="290" width="200" height="45" class="security" rx="5"/>
  <text x="750" y="310" class="label" text-anchor="middle" font-weight="bold">Risk Guard</text>
  <text x="750" y="327" class="small-label" text-anchor="middle">PoW + Anti-Abuse</text>
  
  <!-- Service Layer -->
  <rect x="50" y="380" width="900" height="180" fill="#E8F4F8" stroke="#CCC" stroke-width="1" rx="5"/>
  <text x="70" y="405" class="label" font-weight="bold">MICROSERVICES (Cloud Run)</text>
  
  <rect x="80" y="425" width="160" height="55" class="service" rx="5"/>
  <text x="160" y="448" class="label" text-anchor="middle" font-weight="bold">chat-delivery</text>
  <text x="160" y="465" class="small-label" text-anchor="middle">Message routing</text>
  <text x="160" y="478" class="small-label" text-anchor="middle">Receipt generation</text>
  
  <rect x="260" y="425" width="160" height="55" class="service" rx="5"/>
  <text x="340" y="448" class="label" text-anchor="middle" font-weight="bold">key-directory</text>
  <text x="340" y="465" class="small-label" text-anchor="middle">JWKS endpoint</text>
  <text x="340" y="478" class="small-label" text-anchor="middle">Key rotation</text>
  
  <rect x="440" y="425" width="160" height="55" class="service" rx="5"/>
  <text x="520" y="448" class="label" text-anchor="middle" font-weight="bold">identity</text>
  <text x="520" y="465" class="small-label" text-anchor="middle">User management</text>
  <text x="520" y="478" class="small-label" text-anchor="middle">Passkey registry</text>
  
  <rect x="620" y="425" width="160" height="55" class="service" rx="5"/>
  <text x="700" y="448" class="label" text-anchor="middle" font-weight="bold">media</text>
  <text x="700" y="465" class="small-label" text-anchor="middle">E2EE attachments</text>
  <text x="700" y="478" class="small-label" text-anchor="middle">CDN integration</text>
  
  <rect x="800" y="425" width="130" height="55" class="service" rx="5"/>
  <text x="865" y="448" class="label" text-anchor="middle" font-weight="bold">risk-guard</text>
  <text x="865" y="465" class="small-label" text-anchor="middle">Anti-spam</text>
  <text x="865" y="478" class="small-label" text-anchor="middle">Reputation</text>
  
  <rect x="170" y="495" width="180" height="50" class="security" rx="5"/>
  <text x="260" y="518" class="label" text-anchor="middle" font-weight="bold">Trust Portal</text>
  <text x="260" y="535" class="small-label" text-anchor="middle">SBOM + SLSA + Cosign Verify</text>
  
  <rect x="470" y="495" width="180" height="50" class="security" rx="5"/>
  <text x="560" y="518" class="label" text-anchor="middle" font-weight="bold">Verify Endpoint</text>
  <text x="560" y="535" class="small-label" text-anchor="middle">/verify + Receipt Validation</text>
  
  <!-- Infrastructure Layer -->
  <rect x="50" y="580" width="900" height="100" fill="#F3E5F5" stroke="#CCC" stroke-width="1" rx="5"/>
  <text x="70" y="605" class="label" font-weight="bold">INFRASTRUCTURE (GCP)</text>
  
  <rect x="100" y="625" width="150" height="40" class="storage" rx="5"/>
  <text x="175" y="645" class="label" text-anchor="middle">Artifact Registry</text>
  <text x="175" y="660" class="small-label" text-anchor="middle">Signed Images</text>
  
  <rect x="280" y="625" width="150" height="40" class="storage" rx="5"/>
  <text x="355" y="645" class="label" text-anchor="middle">Secret Manager</text>
  <text x="355" y="660" class="small-label" text-anchor="middle">OIDC + Rotation</text>
  
  <rect x="460" y="625" width="150" height="40" class="storage" rx="5"/>
  <text x="535" y="645" class="label" text-anchor="middle">Cloud Logging</text>
  <text x="535" y="660" class="small-label" text-anchor="middle">Structured Logs</text>
  
  <rect x="640" y="625" width="150" height="40" class="storage" rx="5"/>
  <text x="715" y="645" class="label" text-anchor="middle">Cloud Monitoring</text>
  <text x="715" y="660" class="small-label" text-anchor="middle">SLO Tracking</text>
  
  <rect x="820" y="625" width="110" height="40" class="storage" rx="5"/>
  <text x="875" y="645" class="label" text-anchor="middle">Firestore</text>
  <text x="875" y="660" class="small-label" text-anchor="middle">Metadata</text>
  
  <!-- Data flows -->
  <line x1="175" y1="200" x2="250" y2="290" class="line" marker-end="url(#arrowhead)"/>
  <line x1="375" y1="200" x2="340" y2="425" class="line dashed"/>
  <line x1="575" y1="200" x2="560" y2="495" class="line dashed"/>
  
  <!-- Arrowhead marker -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#0A2540"/>
    </marker>
  </defs>
</svg>
